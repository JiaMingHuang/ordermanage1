<div class="row">
	<div class="col-lg-12">
		<h1 class="page-header">柏丽水晶库存</h1>
	</div>
	<!-- /.col-lg-12 -->
</div>
<!-- /.row -->
<div class="row">
	<div class="col-lg-12">
		<div class="panel panel-default">
			<div class="panel-heading">查看库存</div>
			<!-- /.panel-heading -->
			<div class="panel-body">
			<div class="form-group">
					<div>
						<div class="col-sm-3">
							<label>品名规格颜色：</label>
							 <input class="form-control"  name="name_spec_color">
						</div>
				</div>
						<div class="col-sm-3">
							<button id="storehouse-query" type="button" class="btn btn-primary">查询</button>
						</div>
					</div>
				<table width="100%"
					class="table table-striped table-bordered table-hover"
					id="dataTables-example">
					<thead>
						<tr>
							<th>编号</th>
							<th>品名规格颜色</th>
							<th>数量</th>
							<th>创建时间</th>
							<th>操作</th>
						</tr>
					</thead>
					<tbody id="storehouse-tbody">
						<!-- <tr th:each="StoreHouseVO : ${list}">
							<td th:text="${StoreHouseVO.id}"></td>
							<td th:text="${StoreHouseVO.name_spec_color}"></td>
							<td th:text="${StoreHouseVO.amount}"></td>
							<td
								th:text="${#dates.format(StoreHouseVO.createDate,'yyyy-MM-dd')}"></td>
						</tr> -->
					</tbody>
				</table>
			</div>
			<!-- /.panel-body -->
		</div>
		<!-- /.panel -->
	</div>
	<!-- /.col-lg-12 -->
</div>
<script type="text/javascript">
/* $(function(){
	$("#storehouse-query").click();
}); */
 $(document).ready(function() {
	initData();
}); 
    	/*
    $(document).ready(function() {
    	initData();
        $('#dataTables-example').DataTable({
            responsive: true,
			searching: false
        });
    });
    	*/
    
    function initData() {
        var storehouse = {
        		name_spec_color:$("input[name='name_spec_color']").val(),
        };
        $.ajax({
            type: "POST",
            data: storehouse,
            url: `/storehouse/findStoreHouseByCondition`,
            async: true,
            context: document.body,
            success: function (data) {
                let _dom;
                data.forEach((val, index, data) => {
                    _dom += `
                    <tr>
                        <td>${val.id}</td>
                        <td>${val.name_spec_color}</td>
                        <td>${val.amount}</td>
                        <td>${val.createDate}</td>
                        <td>
                            <p class="fa fa-edit"></p>
                            <p class="fa fa-trash-o" rel="/storehouse/${val.id}" "></p>
                        </td>
                     </tr>
                    `;
                });
                $("#storehouse-tbody").replaceWith("<tbody id=\"storehouse-tbody\">"+ _dom +"</tbody>");
                $('#dataTables-example').DataTable().DataTable({
                    responsive: true
                });
            }
        });
    }
    
    $("#storehouse-query").click(function () {
    	initData();
    });
    </script>
